function renderData(e){options.series=[],e.forEach(function(e){options.series.push({name:e.dataset_code,data:e.stockData.map(function(e){return[new Date(e[0]).getTime(),e[4]]}),tooltip:{valueDecimals:2}})}),new Highcharts.StockChart(options)}var elm=document.getElementById("container"),options={chart:{renderTo:elm},rangeSelector:{selected:1},series:[]},socket=io();Highcharts.setOptions({chart:{backgroundColor:{linearGradient:[0,0,500,500],stops:[[0,"rgb(255, 255, 255)"],[1,"rgb(240, 240, 255)"]]},borderWidth:2,plotBackgroundColor:"rgb(39, 56, 63)",plotShadow:!0,plotBorderWidth:1}}),$(".add-btn").click(function(){var e=$(".symbol-field").val();socket.emit("send",e),$(".add-btn").text("Adding..."),$(".add-btn").prop("disabled",!0),$(".symbol-field").val("")}),socket.on("add",function(e){var t=e[e.length-1],n=document.createElement("div"),o=document.createElement("h1"),d=document.createElement("p"),a=document.createElement("button"),i=document.createTextNode("Delete"),r=document.createTextNode(t.dataset_code),s=document.createTextNode(t.stockName);a.setAttribute("class","delete-btn"),a.setAttribute("data-stockId",t._id),n.setAttribute("class","stocks"),n.setAttribute("id",t._id),a.appendChild(i),d.appendChild(s),o.appendChild(r),n.appendChild(o),n.appendChild(d),n.appendChild(a),$(".stock-container").append(n),$(".add-btn").text("Add"),$(".add-btn").prop("disabled",!0)}),socket.on("data",function(e){renderData(e)}),socket.on("refresh",function(e){renderData(e)}),$(document).on("click",".delete-btn",function(){var e=$(this).attr("data-stockId");$(this).prop("disabled",!0),$(this).html("Deleting.."),socket.emit("delete",e)}),socket.on("delete",function(e){$("#"+e).hide()}),socket.on("err",function(e){$(".overlay").show(),$(".warning-message").html("Incorrect stock symbol, please enter a valid stock symbol"),$(".stock-warning-popup").show(),$(".add-btn").text("Add"),$(".add-btn").prop("disabled",!1)}),socket.on("general",function(e){$(".overlay").show(),$(".warning-message").html("Something went wrong, please try again"),$(".stock-warning-popup").show(),$(".add-btn").text("Add"),$(".add-btn").prop("disabled",!1)}),$(".close-btn").click(function(){$(".overlay").hide(),$(".stock-warning-popup").hide()}),$(".symbol-field").keyup(function(e){""!==e.target.value?$(".add-btn").prop("disabled",!1):$(".add-btn").prop("disabled",!0)});